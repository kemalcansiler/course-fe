<!-- Banner Section -->
<div class="banner-section">
  <img src="banner.png" alt="Course Learning Banner" class="banner-image" />
</div>

<!-- Main Content Container -->
<div class="main-container">
  <!-- Course Listing Section -->
  <div class="course-listing-section">
    <!-- Header with Sort and Results Count -->
    <div class="listing-header">
      <div class="sort-section">
        <mat-form-field appearance="outline" class="sort-field">
          <mat-label>Sort by</mat-label>
          <mat-select [value]="sortBy()" (selectionChange)="onSortChange($event.value)">
            <mat-option value="most-popular">Most Popular</mat-option>
            <mat-option value="highest-rated">Highest Rated</mat-option>
            <mat-option value="newest">Newest</mat-option>
            <mat-option value="price-low-to-high">Price: Low to High</mat-option>
            <mat-option value="price-high-to-low">Price: High to Low</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="results-count">
        @if (loading()) {
          <div class="skeleton-text"></div>
        } @else {
          {{ courseData().totalResults | number }} results
        }
      </div>
    </div>

    <!-- Desktop Layout: Sidebar + Content -->
    <div class="desktop-layout">
      <!-- Filters Sidebar -->
      <div class="filters-sidebar">
        <app-course-filters
          [filters]="courseData().filters"
          (filterChange)="onFilterChange($event)"
        />
      </div>

      <!-- Course Grid -->
      <div class="courses-grid">
        @if (loading()) {
          @for (item of [1, 2, 3, 4, 5, 6]; track item) {
            <app-course-skeleton />
          }
        } @else if (courseData().courses.length === 0) {
          <app-no-data-found
            title="No Courses Found"
            message="We couldn't find any courses matching your criteria. Try adjusting your filters or search terms."
            [showAction]="true"
            actionText="Clear Filters"
            [actionClick]="clearFilters"
          />
        } @else {
          @for (course of courseData().courses; track course.id; let last = $last) {
            <app-course-card [course]="course" />
            @if (!last) {
              <mat-divider />
            }
          }
        }
      </div>
    </div>

    <!-- Mobile Layout: Filters + Content -->
    <div class="mobile-layout">
      <!-- Mobile Filters -->
      <div class="mobile-filters-section">
        <app-course-filters
          [filters]="courseData().filters"
          (filterChange)="onFilterChange($event)"
        />
      </div>

      <!-- Mobile Course Grid -->
      <div class="mobile-courses-grid">
        @if (loading()) {
          @for (item of [1, 2, 3, 4, 5, 6]; track item) {
            <app-course-skeleton />
          }
        } @else if (courseData().courses.length === 0) {
          <app-no-data-found
            title="No Courses Found"
            message="We couldn't find any courses matching your criteria. Try adjusting your filters or search terms."
            [showAction]="true"
            actionText="Clear Filters"
            [actionClick]="clearFilters"
          />
        } @else {
          @for (course of courseData().courses; track course.id; let last = $last) {
            <app-course-card [course]="course" />
            @if (!last) {
              <mat-divider />
            }
          }
        }
      </div>
    </div>

    <!-- Pagination -->
    @if (!loading() && courseData().courses.length > 0) {
      <app-course-pagination
        [pagination]="courseData().pagination"
        (pageChange)="onPageChange($event)"
      />
    }
  </div>
</div>
